import{a as h,f as y}from"../chunks/wmwKEafM.js";import{o as Ee}from"../chunks/DZf5toYK.js";import{p as Me,f as Ke,t as K,a as Le,s as d,g as a,c as s,e as i,r as t,d as oe,u as z,G as Te}from"../chunks/DleE0ac1.js";import{d as qe,a as _,s as u}from"../chunks/8PSwG_AU.js";import{i as ie}from"../chunks/BHs8FnOA.js";import{e as H,i as V}from"../chunks/BsRos8Kb.js";import{s as Fe}from"../chunks/CVDMn5X_.js";import{s as le,r as Se,b as Ae}from"../chunks/ChQRIhGP.js";import{s as W}from"../chunks/BK028jHP.js";import{b as Ne}from"../chunks/D6XtQ4nY.js";import{s as De,a as L}from"../chunks/M1z6VHZC.js";import{s as Ge,g as de,b as O}from"../chunks/rHGvVkdq.js";import{w as ce,a as je,i as Re,m as ze}from"../chunks/kVvujbiQ.js";const He=()=>{const m=Ge;return{page:{subscribe:m.page.subscribe},navigating:{subscribe:m.navigating.subscribe},updated:m.updated}},Ve={subscribe(m){return He().page.subscribe(m)}};var We=y('<a><span class="text-base w-5 text-center"> </span> <span class="hidden lg:block"> </span> <span class="hidden lg:block ml-auto text-[10px] text-muted/50 font-mono"> </span></a>'),Oe=y('<a><span class="text-lg"> </span> <span class="text-[9px]"> </span></a>'),Qe=y('<button class="w-full flex items-center gap-3 px-4 py-2.5 text-sm text-dim hover:text-text hover:bg-surface/40 transition"><span class="text-base w-5 text-center"> </span> <span> </span> <span class="ml-auto text-[10px] text-muted/50 font-mono hidden md:block"> </span></button>'),Be=y('<div class="px-4 py-6 text-center text-sm text-muted">No matches</div>'),Je=y('<div class="fixed inset-0 z-50 flex items-start justify-center pt-[10vh] md:pt-[15vh] px-4 bg-void/60 backdrop-blur-sm"><div class="w-full max-w-lg bg-abyss border border-subtle/40 rounded-xl shadow-2xl shadow-synapse/10 overflow-hidden"><div class="flex items-center gap-3 px-4 py-3 border-b border-subtle/20"><span class="text-synapse text-sm">◎</span> <input type="text" placeholder="Navigate to..." class="flex-1 bg-transparent text-text text-sm placeholder:text-muted focus:outline-none"/> <span class="text-[10px] text-muted font-mono bg-surface/40 px-1.5 py-0.5 rounded">esc</span></div> <div class="max-h-72 overflow-y-auto py-1"><!> <!></div></div></div>'),Ue=y('<div class="flex flex-col md:flex-row h-screen overflow-hidden bg-void"><nav class="hidden md:flex w-16 lg:w-56 flex-shrink-0 bg-abyss border-r border-subtle/30 flex-col"><a href="/" class="flex items-center gap-3 px-4 py-5 border-b border-subtle/20"><div class="w-8 h-8 rounded-lg bg-gradient-to-br from-dream to-synapse flex items-center justify-center text-bright text-sm font-bold">V</div> <span class="hidden lg:block text-sm font-semibold text-bright tracking-wide">VESTIGE</span></a> <div class="flex-1 py-3 flex flex-col gap-1 px-2"></div> <div class="px-2 pb-2"><button class="w-full flex items-center gap-2 px-3 py-2 rounded-lg text-xs text-muted hover:text-dim hover:bg-surface/50 transition border border-subtle/20"><span class="text-[10px] font-mono bg-surface/60 px-1.5 py-0.5 rounded">⌘K</span> <span class="hidden lg:block">Command</span></button></div> <div class="px-3 py-4 border-t border-subtle/20 space-y-2"><div class="flex items-center gap-2 text-xs"><div></div> <span class="hidden lg:block text-dim"> </span></div> <div class="hidden lg:block text-xs text-muted"><div> </div> <div> </div></div></div></nav> <main class="flex-1 overflow-y-auto pb-16 md:pb-0"><div class="animate-page-in svelte-12qhfyh"><!></div></main> <nav class="md:hidden fixed bottom-0 inset-x-0 bg-abyss/95 backdrop-blur-xl border-t border-subtle/30 z-40 safe-bottom svelte-12qhfyh"><div class="flex items-center justify-around px-2 py-1"><!> <button class="flex flex-col items-center gap-0.5 px-3 py-2 rounded-lg text-muted min-w-[3.5rem]"><span class="text-lg">⋯</span> <span class="text-[9px]">More</span></button></div></nav></div> <!>',1);function lt(m,T){Me(T,!0);const Q=()=>L(Ve,"$page",k),B=()=>L(Re,"$isConnected",k),pe=()=>L(ze,"$memoryCount",k),ve=()=>L(je,"$avgRetention",k),[k,ue]=De();let c=oe(!1),x=oe(""),p;Ee(()=>{ce.connect();function r(e){if((e.metaKey||e.ctrlKey)&&e.key==="k"){e.preventDefault(),d(c,!a(c)),d(x,""),a(c)&&requestAnimationFrame(()=>p==null?void 0:p.focus());return}if(e.key==="Escape"&&a(c)){d(c,!1);return}if(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)return;if(e.key==="/"){e.preventDefault();const l=document.querySelector('input[type="text"]');l==null||l.focus();return}const n={g:"/",m:"/memories",t:"/timeline",f:"/feed",e:"/explore",i:"/intentions",s:"/stats"}[e.key.toLowerCase()];n&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&(e.preventDefault(),de(`${O}${n}`))}return window.addEventListener("keydown",r),()=>{ce.disconnect(),window.removeEventListener("keydown",r)}});const $=[{href:"/",label:"Graph",icon:"◎",shortcut:"G"},{href:"/memories",label:"Memories",icon:"◈",shortcut:"M"},{href:"/timeline",label:"Timeline",icon:"◷",shortcut:"T"},{href:"/feed",label:"Feed",icon:"◉",shortcut:"F"},{href:"/explore",label:"Explore",icon:"◬",shortcut:"E"},{href:"/intentions",label:"Intentions",icon:"◇",shortcut:"I"},{href:"/stats",label:"Stats",icon:"◫",shortcut:"S"},{href:"/settings",label:"Settings",icon:"⚙",shortcut:","}],fe=$.slice(0,5);function J(r,e){const v=e.startsWith(O)?e.slice(O.length)||"/":e;return r==="/"?v==="/"||v==="/graph":v.startsWith(r)}let C=z(()=>a(x)?$.filter(r=>r.label.toLowerCase().includes(a(x).toLowerCase())):$);function U(r){d(c,!1),d(x,""),de(r)}var X=Ue(),q=Ke(X),F=s(q),S=i(s(F),2);H(S,21,()=>$,V,(r,e)=>{const v=z(()=>J(a(e).href,Q().url.pathname));var n=We(),l=s(n),b=s(l,!0);t(l);var f=i(l,2),w=s(f,!0);t(f);var E=i(f,2),o=s(E,!0);t(E),t(n),K(()=>{le(n,"href",a(e).href),W(n,1,`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 text-sm
						${a(v)?"bg-synapse/15 text-synapse-glow border border-synapse/30 shadow-[0_0_12px_rgba(99,102,241,0.15)]":"text-dim hover:text-text hover:bg-surface border border-transparent"}`),u(b,a(e).icon),u(w,a(e).label),u(o,a(e).shortcut)}),h(r,n)}),t(S);var A=i(S,2),xe=s(A);t(A);var Y=i(A,2),N=s(Y),Z=s(N),P=i(Z,2),me=s(P,!0);t(P),t(N);var I=i(N,2),D=s(I),be=s(D);t(D);var ee=i(D,2),ge=s(ee);t(ee),t(I),t(Y),t(F);var G=i(F,2),te=s(G),he=s(te);Fe(he,()=>T.children),t(te),t(G);var se=i(G,2),ae=s(se),re=s(ae);H(re,17,()=>fe,V,(r,e)=>{const v=z(()=>J(a(e).href,Q().url.pathname));var n=Oe(),l=s(n),b=s(l,!0);t(l);var f=i(l,2),w=s(f,!0);t(f),t(n),K(()=>{le(n,"href",a(e).href),W(n,1,`flex flex-col items-center gap-0.5 px-3 py-2 rounded-lg transition-all min-w-[3.5rem]
						${a(v)?"text-synapse-glow":"text-muted"}`),u(b,a(e).icon),u(w,a(e).label)}),h(r,n)});var _e=i(re,2);t(ae),t(se),t(q);var ye=i(q,2);{var we=r=>{var e=Je(),v=s(e),n=s(v),l=i(s(n),2);Se(l),Ne(l,o=>p=o,()=>p),Te(2),t(n);var b=i(n,2),f=s(b);H(f,17,()=>a(C),V,(o,g)=>{var M=Qe(),j=s(M),ke=s(j,!0);t(j);var R=i(j,2),$e=s(R,!0);t(R);var ne=i(R,2),Ce=s(ne,!0);t(ne),t(M),K(()=>{u(ke,a(g).icon),u($e,a(g).label),u(Ce,a(g).shortcut)}),_("click",M,()=>U(a(g).href)),h(o,M)});var w=i(f,2);{var E=o=>{var g=Be();h(o,g)};ie(w,o=>{a(C).length===0&&o(E)})}t(b),t(v),t(e),_("keydown",e,o=>{o.key==="Escape"&&d(c,!1)}),_("click",e,o=>{o.target===o.currentTarget&&d(c,!1)}),_("keydown",l,o=>{o.key==="Enter"&&a(C).length>0&&U(a(C)[0].href)}),Ae(l,()=>a(x),o=>d(x,o)),h(r,e)};ie(ye,r=>{a(c)&&r(we)})}K(r=>{W(Z,1,`w-2 h-2 rounded-full ${B()?"bg-recall animate-pulse-glow":"bg-decay"}`),u(me,B()?"Connected":"Offline"),u(be,`${pe()??""} memories`),u(ge,`${r??""}% retention`)},[()=>(ve()*100).toFixed(0)]),_("click",xe,()=>{d(c,!0),d(x,""),requestAnimationFrame(()=>p==null?void 0:p.focus())}),_("click",_e,()=>{d(c,!0),d(x,""),requestAnimationFrame(()=>p==null?void 0:p.focus())}),h(m,X),Le(),ue()}qe(["click","keydown"]);export{lt as component};
